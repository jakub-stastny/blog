<script name="routing">
  import router from '/blog/js/router.js'
  import { Post, PostIndex } from '/blog/js/post.js'

  console.log(router)

  console.log(location.pathname.split('/').filter(chunk => chunk.length).slice(1))
  console.log(router(location.pathname.split('/').filter(chunk => chunk.length).slice(1)))

  //console.log(router(location.pathname.split('/').filter(chunk => chunk.length).slice(1)))
  // const pageComponent = router(location.pathname.split('/').filter(chunk => chunk.length).slice(1))[0]

  // console.log(`Routing to the %c${pageComponent}%c component`, 'color:#87CEEB', 'color:#fff')

  const promise = fetch("/blog/data/posts.json")
  const response = await promise

  console.log(response)
  const data = await response.json()
  console.log(data[0])
  
  const posts = data.map(rawPost => new Post(rawPost))
  window.p = posts[0]
  console.log(posts[0])

  const pageComponent = PostIndex ///
  const params = {}
  $('#router').innerHTML = pageComponent(posts, params)
</script>

<div id="router">Loading ...</div>